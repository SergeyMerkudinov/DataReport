# Сервис по поиску тренера

## Структура проекта
В каждой папке находится свой readme файл с более подробным описанием

**Верхнеуровневое описание:**
 - **DataAggregator** - Каталог со всем исходным кодом приложения
 - **DataReport** - Каталог с файлами общего Django-проекта DataReport, внутри которого создано приложение DataAggregator
 - **db.sqlite3** - Дефолтная SQLite база фреймфорка
 - **manage.py** - Дефолтный скрипт фреймворка
 
 **Чуть более подробное описание проекта:**
 В проекте используется структура папок и файлов, предлагаемая фреймворком Django. В контексте основного проекта DataReport создано приложение DataAggregator и находится в соответсвующем разделе. Все разработанные скрипты также находятся там.
 В папке **data** находятся данные, которые используются в качестве источников. Путь к файлу с данными прописан в настройках apps.py.
 В папке **library** описан класс DataLoader, который используется для извлечения данных. Класс предоставляет единый интерфейс для извлечения данных через метод extract(). Класс оперирует настройками, которые задаются в файле apps.py
 В папке **static** хранятся CSS-стили и JS-скрипты. В проекте для стилевого оформления использован CSS-фреймворк Bootstrap, а для JS-скриптов используется jQuery.
 В папке **templates** хранятся HTML-шаблоны страниц, а также их компонентов. Основным файлом является base_template.html. Он представляет собой макет страницы и ссылается на 2 компонента: шапку(navbar.html) и подвал(footer.html). На основе базового шаблона страницы строятся все страницы проекта через механизм наследования.
 Файл **apps.py** содержит в себе настройки приложения.
 Файл **urls.py** представляет собой маршрутизатор на основе url-паттернов. В зависимости от запрашиваемого url происходит вызов соответствующего отображения(view), которое рендерит и выводит конкретный шаблон(template).
 Файл **models.py** описывает сущности и их модели данных в текущем приложении. В нём описана модель данных сущности "Тренер"(Coach), на основе которой создаются объекты и обогащаются данными от загрузчика DataLoader.
 Файл **views.py** содержит представления (view). В проекте используются представления на основе функций (Function-Based Views, FBV), которые подготавливают данные и вызывают рендер соответствующего HTML-шаблона.

## Настройки приложения
Сервис умеет работать с даннными в двух режимах:
1. Загружать данные из csv файла
2. Получать данные через API портала открытых данных (data.mos.ru)

Настройки находятся в файле apps.py в каталоге DataAggregator:
- **DATA_LOAD_METHOD** - Способ загрузки данных. Принимает 1 из 2 возможных значений: API или CSV
- **DATA_LOAD_CSV_PARAMS** - Настройки для извлечения данных из csv-файла
- **DATA_LOAD_API_PARAMS** - Настройки для подключения к внешнему API
- **DATA_LOAD_MAX_RECORDS** - Максимальное количество извлекаемых записей

## Инструкция по запуску проекта
### Windows
1. Установить Python 3 (https://www.python.org/downloads/)
2. Установить Django:
```
pip install django
```
3. Скопировать репозиторий (при наличии установленного git) или просто скачать файлы из репозитория:
```
git clone https://github.com/SergeyMerkudinov/DataReport.git
```
4. Перейти в папку с проектом и запустить сервер в командной строке:
```
python manage.py runserver
```
5. Открыть браузер и перейти по адресу localhost:8000.
